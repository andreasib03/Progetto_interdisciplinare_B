<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.*?>

<VBox xmlns="http://javafx.com/javafx/17.0.10" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="it.uninsubria.client.controller.homepage.BookDetailController"
      spacing="20.0" styleClass="bookDetailMainContainer">

    <!-- Loading overlay -->
    <StackPane fx:id="loadingOverlay" styleClass="loadingOverlay" visible="true" VBox.vgrow="ALWAYS">
        <VBox spacing="20.0" alignment="CENTER">
            <ProgressIndicator prefHeight="60.0" prefWidth="60.0" />
            <Label styleClass="loadingLabel" text="%book.detail.loading" />
        </VBox>
    </StackPane>

    <!-- Book Header -->
    <VBox spacing="10.0">
        <HBox alignment="CENTER_LEFT" spacing="15.0">
            <Button fx:id="backButton" styleClass="backButton" text="%book.detail.back" />
            <VBox spacing="5.0">
                <Label fx:id="bookTitleLabel" styleClass="bookTitleLabel" />
                <Label fx:id="bookAuthorLabel" styleClass="bookAuthorLabel" />
                <Label fx:id="bookYearLabel" styleClass="bookYearLabel" />
            </VBox>
        </HBox>

        <TextArea fx:id="bookDescriptionArea" styleClass="bookDescriptionArea" editable="false" wrapText="true" prefRowCount="3" />
    </VBox>

    <!-- Reviews Section -->
    <VBox fx:id="reviewsSection" styleClass="reviewsSection" spacing="15.0">
        <Label styleClass="sectionTitle" text="Recensioni" />

        <!-- No Reviews Message -->
        <VBox fx:id="noReviewsBox" styleClass="noReviewsBox" spacing="10.0" alignment="CENTER">
            <Label styleClass="noReviewsLabel" text="Nessuna recensione disponibile per questo libro." />
            <visible>false</visible>
        </VBox>

        <!-- Reviews Content -->
        <VBox fx:id="reviewsContent" spacing="20.0">
            <!-- Average Scores -->
            <VBox fx:id="averagesBox" spacing="10.0">
                <Label styleClass="subsectionTitle" text="Valutazioni Medie" />

                <GridPane fx:id="averagesGrid" styleClass="averagesGrid" hgap="20.0" vgap="10.0">
                    <!-- Will be populated programmatically -->
                </GridPane>
            </VBox>

            <!-- Score Distribution -->
            <VBox fx:id="distributionBox" spacing="15.0">
                <Label styleClass="subsectionTitle" text="Distribuzione Voti" />

                <VBox fx:id="criteriaDistribution" spacing="10.0">
                    <!-- Will be populated programmatically -->
                </VBox>
            </VBox>

            <!-- Comments Section -->
            <VBox fx:id="commentsBox" spacing="10.0">
                <Label styleClass="subsectionTitle" text="Commenti" />

                <VBox fx:id="commentsContainer" styleClass="commentsContainer" spacing="10.0">
                    <!-- Will be populated programmatically -->
                </VBox>
            </VBox>
        </VBox>
    </VBox>

    <!-- Suggested Books Section -->
    <VBox fx:id="suggestionsSection" styleClass="suggestionsSection" spacing="15.0">
        <Label styleClass="sectionTitle" text="Libri Suggeriti" />

        <VBox fx:id="suggestionsContainer" styleClass="suggestionsContainer" spacing="10.0">
            <!-- Will be populated programmatically -->
        </VBox>
    </VBox>

</VBox>